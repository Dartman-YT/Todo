<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Student Todo App</title>
  <style>
    :root {
      --bg: #f1f1f1;
      --card-bg: #ffffff;
      --text: #222;
      --primary: #5c6bc0;
      --accent: #ffb74d;
      --shadow: rgba(0, 0, 0, 0.1);
    }[data-theme="dark"] {
  --bg: #121212;
  --card-bg: #1e1e1e;
  --text: #f1f1f1;
  --primary: #7986cb;
  --accent: #ffcc80;
  --shadow: rgba(255, 255, 255, 0.05);
}

* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
  font-family: "Segoe UI", sans-serif;
  transition: background 0.3s, color 0.3s;
}

body {
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 2rem;
}

.header {
  text-align: center;
  margin-bottom: 1.5rem;
}

.header h1 {
  font-size: 2rem;
}

.task-count {
  font-size: 0.9rem;
  opacity: 0.8;
}

.tasks {
  width: 100%;
  max-width: 500px;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.task-card {
  background: var(--card-bg);
  border-radius: 12px;
  padding: 1rem;
  box-shadow: 0 4px 12px var(--shadow);
  display: flex;
  justify-content: space-between;
  align-items: center;
  animation: slideIn 0.5s ease;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.task-details {
  flex: 1;
}

.task-title {
  font-size: 1.1rem;
  font-weight: bold;
}

.task-meta {
  font-size: 0.85rem;
  opacity: 0.7;
}

.delete-btn {
  background: transparent;
  border: none;
  color: var(--accent);
  font-size: 1.2rem;
  cursor: pointer;
}

.add-btn {
  position: fixed;
  bottom: 2rem;
  left: 50%;
  transform: translateX(-50%);
  background: var(--primary);
  color: white;
  padding: 1rem 2rem;
  border: none;
  border-radius: 999px;
  font-size: 1rem;
  cursor: pointer;
  box-shadow: 0 8px 20px var(--shadow);
}

.form-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  visibility: hidden;
  opacity: 0;
  transition: 0.3s;
}

.form-overlay.active {
  visibility: visible;
  opacity: 1;
}

.form-container {
  background: var(--card-bg);
  padding: 2rem;
  border-radius: 16px;
  box-shadow: 0 8px 24px var(--shadow);
  width: 90%;
  max-width: 400px;
  animation: popIn 0.4s ease;
}

@keyframes popIn {
  from {
    transform: scale(0.8);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

.form-container input, .form-container select, .form-container button {
  width: 100%;
  margin: 0.5rem 0;
  padding: 0.75rem;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 1rem;
}

.form-container button {
  background: var(--primary);
  color: white;
  border: none;
  cursor: pointer;
}

.dark-toggle {
  position: absolute;
  top: 1rem;
  right: 1rem;
  cursor: pointer;
}

  </style>
</head>
<body>
  <div class="dark-toggle">ðŸŒ“</div>
  <div class="header">
    <h1>Student Todo List</h1>
    <div class="task-count">Tasks: <span id="task-count">0</span></div>
  </div>
  <div class="tasks" id="task-list"></div><button class="add-btn" id="open-form">+ Add Task</button>

  <div class="form-overlay" id="form-overlay">
    <div class="form-container">
      <input type="text" id="task-title" placeholder="Task title" required />
      <input type="date" id="task-deadline" required />
      <select id="task-importance">
        <option value="">Importance (1-5)</option>
        <option value="5">5 - Highest</option>
        <option value="4">4</option>
        <option value="3">3</option>
        <option value="2">2</option>
        <option value="1">1 - Lowest</option>
      </select>
      <button id="submit-task">Add Task</button>
    </div>
  </div>  <script>
    const tasks = [];

    const taskList = document.getElementById("task-list");
    const taskCount = document.getElementById("task-count");
    const overlay = document.getElementById("form-overlay");
    const openForm = document.getElementById("open-form");
    const submitTask = document.getElementById("submit-task");
    const darkToggle = document.querySelector(".dark-toggle");

    openForm.onclick = () => overlay.classList.add("active");
    overlay.onclick = e => {
      if (e.target === overlay) overlay.classList.remove("active");
    };

    darkToggle.onclick = () => {
      document.documentElement.toggleAttribute("data-theme", "dark");
    };

    function updateTasks() {
      taskList.innerHTML = "";
      taskCount.textContent = tasks.length;

      tasks.sort((a, b) => {
        if (b.importance !== a.importance) return b.importance - a.importance;
        if (a.title.toLowerCase() !== b.title.toLowerCase()) return a.title.localeCompare(b.title);
        return new Date(a.deadline) - new Date(b.deadline);
      });

      for (const task of tasks) {
        const card = document.createElement("div");
        card.className = "task-card";

        const details = document.createElement("div");
        details.className = "task-details";

        const title = document.createElement("div");
        title.className = "task-title";
        title.textContent = task.title;

        const meta = document.createElement("div");
        meta.className = "task-meta";
        meta.textContent = `Deadline: ${task.deadline} | Importance: ${task.importance}`;

        const del = document.createElement("button");
        del.className = "delete-btn";
        del.textContent = "âœ•";
        del.onclick = () => {
          const idx = tasks.indexOf(task);
          if (idx > -1) tasks.splice(idx, 1);
          updateTasks();
        };

        details.appendChild(title);
        details.appendChild(meta);
        card.appendChild(details);
        card.appendChild(del);
        taskList.appendChild(card);
      }
    }

    submitTask.onclick = () => {
      const title = document.getElementById("task-title").value.trim();
      const deadline = document.getElementById("task-deadline").value;
      const importance = parseInt(document.getElementById("task-importance").value);

      if (!title || !deadline || !importance || importance < 1 || importance > 5) return;

      tasks.push({ title, deadline, importance });

      document.getElementById("task-title").value = "";
      document.getElementById("task-deadline").value = "";
      document.getElementById("task-importance").value = "";
      overlay.classList.remove("active");
      updateTasks();
    };

    // Initial dark mode state if preferred
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.setAttribute("data-theme", "dark");
    }
  </script></body>
</html>
